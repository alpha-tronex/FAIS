<main class="page">
  <h1>My cases</h1>

  <p *ngIf="error" class="error">{{ error }}</p>

  <section class="mt16">
    <div class="rowActions">
      <button type="button" (click)="refresh()" [disabled]="busy">Refresh</button>
      <span *ngIf="busy">Loadingâ€¦</span>
    </div>

    <table *ngIf="cases.length > 0" class="table mt12">
      <thead>
        <tr>
          <th class="th">Case #</th>
          <th class="th">Division</th>
          <th class="th">Petitioner</th>
          <th class="th">Respondent</th>
          <th class="th">Created</th>
          <th class="th">{{ isRespondentViewer ? 'View' : 'Select' }}</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let c of cases">
          <td class="td">{{ c.caseNumber }}</td>
          <td class="td">{{ c.division }}</td>
          <td class="td">
            {{ c.petitioner ? ((c.petitioner.lastName || '') + ', ' + (c.petitioner.firstName || '')) : '' }}
          </td>
          <td class="td">
            {{ c.respondent ? ((c.respondent.lastName || '') + ', ' + (c.respondent.firstName || '')) : '' }}
          </td>
          <td class="td">{{ c.createdAt | date:'short' }}</td>
          <td class="td">
            <button type="button" (click)="selectCase(c.id)" [disabled]="busy" class="submit">{{ isRespondentViewer ? 'View affidavit' : 'Select' }}</button>
          </td>
        </tr>
      </tbody>
    </table>

    <p *ngIf="!busy && cases.length === 0" class="mt12">No cases found.</p>
  </section>
</main>
